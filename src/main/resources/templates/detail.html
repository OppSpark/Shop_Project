<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/main.css" rel="stylesheet">
    <title>상품</title>
</head>

<body>
    <div th:replace="~{nav.html}"></div>

    <div class="detail">
        <h4>상세페이지</h4>
        <img src="https://placehold.co/300">
        <h4 th:text="${item.title}">금도금 바지</h4>
        <p th:text="${item.price + '원'}">7억</p>
        <a th:href="@{'/edit/' + ${item.id}}">수정<a>
        <a class="delete_btn" href="/list" th:attr="data-itemid=${item.id}">삭제</a>
    </div>
    <script>
        const itemId = document.querySelector('.delete_btn').getAttribute('data-itemid');
        document.querySelector('.delete_btn').addEventListener('click', function () {
            console.log(itemId);
            fetch('/api/delete', {
                method: 'DELETE',
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ id: itemId }) 
            });
        });
    </script>
</body>

</html>